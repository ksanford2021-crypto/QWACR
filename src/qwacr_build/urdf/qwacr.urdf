<?xml version="1.0"?>
<robot name="qwacr">
	<!-- Origin is set to the bottom plane of the rectangle for easy offset of the wheel joints
	-->
	<link name="base_link">
		<visual>
			<origin xyz="0 0 .1" rpy="0 0 0"/>
			<geometry>
				<box size=".45 .3 .2"/>
			</geometry>
            <material name="blue">
                 <color rgba="0 0 1 1"/>
            </material>
		</visual>
		<collision>
			<geometry>
				<box size=".45 .3 .2"/>
			</geometry>
		</collision>
		<inertial>
			<mass value="25.0"/>
			<inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
		</inertial>
	</link>

	<!-- Wheels are displaced below the z axis by 2 cm, and at the edge of the box, and
	and 15cm forward and aft of the origin-->
	<!--Wheel 1 in arduino-->
	<joint name="base_to_front_left_wheel" type="continuous">
		<parent link="base_link"/>
		<child link="front_left_wheel_link"/>
		<origin xyz="0.18 0.19 -0.02" rpy="0 0 0"/>
		<axis xyz="0 1 0"/>
		<limit effort="6.2" velocity="104"/>
		<dynamics damping=".0001" friction="0.001"/>
	</joint>
	
	<link name="front_left_wheel_link">
		<visual>
			<origin xyz="0 0 0" rpy="1.5708 0 0"/>
			<geometry>
				<cylinder radius="0.165" length="0.06"/>
			</geometry>
            <material name="red">
                <color rgba="1 0 0 1"/>
            </material>
		</visual>
		<collision>
			<geometry>
				<cylinder radius="0.165" length="0.06"/>
			</geometry>
		</collision>
		<inertial>
			<mass value="1.0"/>
			<inertia ixx="0.0006" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.0"/>
		</inertial>

	</link>

	<!--Wheel 2 in arduino-->
	<joint name="base_to_front_right_wheel" type="continuous">
		<parent link="base_link"/>
		<child link="front_right_wheel_link"/>
		<origin xyz="0.18 -0.19 -0.02" rpy="0 0 0"/>
		<axis xyz="0 1 0"/>
		<limit effort="6.2" velocity="104"/>
		<dynamics damping=".0001" friction="0.001"/>
	</joint>
	
	<link name="front_right_wheel_link">
		<visual>
			<origin xyz="0 0 0" rpy="1.5708 0 0"/>
			<geometry>
				<cylinder radius="0.165" length="0.06"/>
			</geometry>
            <material name="green">
                <color rgba="0 1 0 1"/>
            </material>
		</visual>
		<collision>
			<geometry>
				<cylinder radius="0.165" length="0.06"/>
			</geometry>
		</collision>
		<inertial>
			<mass value="1.0"/>
			<inertia ixx="0.0006" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.0"/>
		</inertial>  
	</link>

	<!--Wheel 4 in arduino-->
	<joint name="base_to_back_left_wheel" type="continuous">
		<parent link="base_link"/>
		<child link="back_left_wheel_link"/>
		<origin xyz="-0.18 0.19 -0.02" rpy="0 0 0"/>
		<axis xyz="0 1 0"/>
		<limit effort="6.2" velocity="104"/>
		<dynamics damping=".0001" friction="0.001"/>
	</joint>
	
	<link name="back_left_wheel_link">
		<visual>
			<origin xyz="0 0 0" rpy="1.5708 0 0"/>
			<geometry>
				<cylinder radius="0.165" length="0.06"/>
			</geometry>
            <material name="yellow">
                <color rgba="1 1 0 1"/>
            </material>
		</visual>
		<collision>
			<geometry>
				<cylinder radius="0.165" length="0.06"/>
			</geometry>
		</collision>
		<inertial>
			<mass value="3.0"/>
			<inertia ixx="0.0006" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.0"/>
		</inertial>
    </link>
	
	<!--Wheel 3 in arduino-->
	<joint name="base_to_back_right_wheel" type="continuous">
		<parent link="base_link"/>
		<child link="back_right_wheel_link"/>
		<origin xyz="-0.18 -0.19 -0.02" rpy="0 0 0"/>
		<axis xyz="0 1 0"/>
		<limit effort="6.2" velocity="104"/>
		<dynamics damping=".0001" friction="0.001"/>
	</joint>
	
	<link name="back_right_wheel_link">
		<visual>
			<origin xyz="0 0 0" rpy="1.5708 0 0"/>
			<geometry>
				<cylinder radius="0.165" length="0.06"/>
			</geometry>
            <material name="purple">
                <color rgba="1 0 1 1"/>
            </material>
		</visual>
		<collision>
			<geometry>
				<cylinder radius="0.165" length="0.06"/>
			</geometry>
		</collision>
		<inertial>
			<mass value="3.0"/>
			<inertia ixx="0.0006" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.0"/>
		</inertial>
	</link>
	<ros2_control name="MegaDiffDriveHardware" type="system">
		<!-- Define the Hardware interface-->
		<hardware>
			<plugin>mega_diff_drive_control/MegaDiffDriveHardware</plugin>
			
			<!-- <class_name>mega_diff_drive_control/MegaDiffDriveHardware</class_name> -->
				
			<param name="serial_port">/tmp/ttyV0</param>
			<param name="baud_rate">115200</param>
				
		</hardware>
		
		<!-- Define the joints to be controlled -->
		<joint name="base_to_front_left_wheel">
			<command_interface name="velocity"/>
			<state_interface name="velocity"/>
			<state_interface name="position"/>
		</joint>
		<joint name="base_to_front_right_wheel">
			<command_interface name="velocity"/>
			<state_interface name="velocity"/>
			<state_interface name="position"/>
		</joint>
		<joint name="base_to_back_left_wheel">
			<command_interface name="velocity"/>
			<state_interface name="velocity"/>
			<state_interface name="position"/>
		</joint>
		<joint name="base_to_back_right_wheel">
			<command_interface name="velocity"/>
			<state_interface name="velocity"/>
			<state_interface name="position"/>
		</joint>
	</ros2_control>
</robot>
